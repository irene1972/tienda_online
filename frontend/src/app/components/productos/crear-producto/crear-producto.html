<section>
    <h1>Crear productos</h1>
    <div [class.text-danger]="tipo === false" [class.text-success]="tipo === true">{{mensaje}}</div>
    <form [formGroup]="miForm" (ngSubmit)="cargarDatos()">
        <label for="nombre">Nombre del producto</label>
        <input type="text" formControlName="nombre" />
        @if (nombre?.touched && nombre?.hasError('required')) {
        <div class="text-danger">
            El nombre es obligatorio.
        </div>
        }
        @if (nombre?.touched && nombre?.hasError('minlength')) {
        <div class="text-danger">
            El nombre debe tener al menos 3 carácteres.
        </div>
        }

        <label for="descripcion">Descripción del producto</label>
        <input type="text" formControlName="descripcion" />
        @if (descripcion?.touched && descripcion?.hasError('required')) {
        <div class="text-danger">
            La descripcion es obligatoria.
        </div>
        }
        @if (descripcion?.touched && descripcion?.hasError('minlength')) {
        <div class="text-danger">
            La descripcion debe tener al menos 3 carácteres.
        </div>
        }

        <label for="precio">Precio</label>
        <input type="number" formControlName="precio" value="0"/>
        @if (precio?.touched && precio?.hasError('required')) {
        <div class="text-danger">
            El precio es obligatorio.
        </div>
        }

        <label for="stock">Stock</label>
        <input type="number" formControlName="stock" value="0" />
        @if (stock?.touched && stock?.hasError('required')) {
        <div class="text-danger">
            El stock es obligatorio.
        </div>
        }

        <label for="oferta">Oferta</label>
        <input type="number" formControlName="oferta" value="0" />
        @if (oferta?.touched && oferta?.hasError('required')) {
        <div class="text-danger">
            La oferta es obligatoria.
        </div>
        }

        <label for="imagen">Imagen</label>
        <input type="file" (change)="onFileChange($event)" />
        @if (imagen?.touched && imagen?.hasError('required')) {
        <div class="text-danger">
            La imagen es obligatoria.
        </div>
        }

        <select formControlName="categoria" id="">
            <option value="">-- Seleccione una Categoría --</option>
            @for(categoria of categorias; track categoria.id){
                <option [value]="categoria.id">{{categoria.nombre}}</option>
            }
        </select>

        <input type="submit" value="Guardar">
    </form>
</section>